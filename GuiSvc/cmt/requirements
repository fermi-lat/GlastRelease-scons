package GuiSvc
version v1r2

branches GuiSvc mgr doc

use gui 
use GaudiSvc


# library is not shareable since it is expected to be linked into the executable
library GuiSvc -no_share\
 *.cxx \
  ../GuiSvc/*.h 

include_dirs $(GUISVCROOT)

macro GuiSvc_lib " -L ${GUISVCROOT}/${CMTCONFIG} -lGuiSvc "\
    WIN32 "${GUISVCROOT}/${BINDIR}/GuiSvc.lib "

# *No* linkopts.

# make this available to build (identical) GUi client applications
macro GuiMain ${GUISVCROOT}/src/GuiMain.cxx


private

# This following is a pattern to use on any Gui application. A main is not necessary since the lib has 
# a generic one that looks for $JOBOPTIONS.
# note redefinition of the macro to *not* include any other dependent libs
# and to force inclusion of the loadRef


# don't know why we need the dl library - TL
pattern guiapp \
  macro use_linkopts " $(GuiSvc_lib) -u GuiSvc_loadRef  $(guiapp_linkopts) $(GaudiKernel_linkopts) -ldl "\
               WIN32 " $(GaudiKernel_linkopts) $(GuiSvc_lib) $(guiapp_linkopts) /include:_GuiSvc_loadRef "

apply_pattern guiapp

macro WinJobOptions ""  VisualC  test/jobOptions.txt


application GuiTest test/*.cxx ${WinJobOptions} ${Win32Resource}

# this has to be public, even for the local test app. could mess up clients
public
set JOBOPTIONS ${GUISVCROOT}/src/test/jobOptions.txt
