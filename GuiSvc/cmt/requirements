package GuiSvc
version v3r5p3

branches GuiSvc cmt doc src

use GlastPolicy v5*
use gui 
use GaudiInterface * IExternal

# library is not shareable since it is expected to be linked into the executable

apply_pattern package_headers

library GuiSvc -no_share  *.cxx ${GuiSvc_headers} 

apply_pattern package_include

macro GuiSvc_lib " -L ${GUISVCROOT}/${CMTCONFIG} -lGuiSvc "\
    WIN32 "${GUISVCROOT}/${BINDIR}/GuiSvc.lib "

# *No* linkopts.

# Gui main is the same as non-gui: this for backwards compatibility
macro GuiMain "$(GlastMain)"


private

# This following is a pattern to use on any Gui application. A main is not necessary since the lib has 
# a generic one that looks for $JOBOPTIONS.
# note redefinition of the macro to *not* include any other dependent libs
# and to force inclusion of the loadRef (Win32) or -u (linux)


# don't know why we need the dl library - TL
#pattern guiapp \
#  macro use_linkopts " $(GaudiKernel_linkopts) $(GuiSvc_lib) $(guiapp_linkopts) $(gui_linkopts) -u GuiSvc_loadRef  -ldl "\
#               WIN32 " $(GaudiKernel_linkopts) $(GuiSvc_lib) $(guiapp_linkopts) $(gui_linkopts) /include:_GuiSvc_loadRef "

#apply_pattern guiapp

macro WinJobOptions ""  WIN32  test/jobOptions.txt

pattern gui_application \
  macro <app>linkopts " $(GaudiKernel_linkopts) $(GuiSvc_lib) $(guiapp_linkopts) $(gui_linkopts) -u GuiSvc_loadRef  -ldl "\
               WIN32 " $(GuiSvc_lib) $(guiapp_linkopts) /include:_GuiSvc_loadRef "

apply_pattern gui_application app=GuiTest

application GuiTest test/*.cxx ${WinJobOptions}  ${GlastMain} ${Win32Resource}

# this has to be public, even for the local test app. could mess up clients
public
set JOBOPTIONS ${GUISVCROOT}/src/test/jobOptions.txt
