//##############################################################
//
//  Job options file for CalXtalResponse test 


// primary DLLs

ApplicationMgr.DLLs+= {"CalibSvc","CalXtalResponse"};

// ----------------------------
// setup basic event loop stuff
//
ApplicationMgr.ExtSvc = { 
//    "GlastEventSelector/EventSelector" , 
    "EventCnvSvc"
    };
EventPersistencySvc.CnvServices = {"EventCnvSvc"};
EventSelector.Input = "NONE";


// ----------------------------
//  topalg
//
ApplicationMgr.TopAlg = {
	"test_CalXtalResponse"
    };


// ----------------------------
//  Geometry definition
//
ApplicationMgr.DLLs += {"GlastSvc"};
ApplicationMgr.ExtSvc += { "GlastDetSvc"};
GlastDetSvc.topVolume="LAT"; 
GlastDetSvc.xmlfile="$(XMLGEODBSROOT)/xml/flight/flightSegVols.xml";
GlastDetSvc.visitorMode="recon";

// Start up a CalibDataSvc 
ApplicationMgr.ExtSvc += {"CalibDataSvc"};

ApplicationMgr.ExtSvc += {"CalibMySQLCnvSvc", "CalibXmlCnvSvc" };

DetectorPersistencySvc.CnvServices += {"CalibMySQLCnvSvc"};
DetectorPersistencySvc.CnvServices += {"CalibXmlCnvSvc"};

// CalibDataSvc properties 
// Storage type of 14 corresponds to MYSQL
CalibDataSvc.CalibInstrumentName = "LAT";
CalibDataSvc.CalibStorageType    = 14;
CalibDataSvc.CalibRootName       = "Calib";
CalibDataSvc.CalibFlavorList     = {"ideal","CAL_8tower_test"};

/////////////////////////////////////////
//-- for tests w/ ideal calibrations --//
/////////////////////////////////////////
ApplicationMgr.ExtSvc += {"CalCalibSvc/CalCalibSvcIdeal"};
CalCalibSvcIdeal.DefaultFlavor = "ideal"; // default for all calib types
ToolSvc.XtalDigiToolIdeal.CalCalibSvc  = "CalCalibSvcIdeal";
ToolSvc.XtalDigiToolIdeal.CalTrigTool  = "CalTrigToolIdeal";
ToolSvc.XtalDigiToolIdeal.PrecalcCalibTool = "PrecalcCalibToolIdeal";
ToolSvc.CalTrigToolIdeal.PrecalcCalibTool = "PrecalcCalibToolIdeal";
ToolSvc.XtalRecToolIdeal.CalCalibSvc   = "CalCalibSvcIdeal";
ToolSvc.CalTrigToolIdeal.CalCalibSvc = "CalCalibSvcIdeal";
ToolSvc.PrecalcCalibToolIdeal.CalCalibSvc = "CalCalibSvcIdeal";
ToolSvc.XtalDigiToolIdeal.NoRandomNoise = true; // default to no random noise

//- xtaldigi w/ noise
ToolSvc.XtalDigiToolIdealNoise.CalCalibSvc  = "CalCalibSvcIdeal";
ToolSvc.XtalDigiToolIdealNoise.CalTrigTool  = "CalTrigToolIdeal";
ToolSvc.XtalDigiToolIdealNoise.PrecalcCalibTool = "PrecalcCalibToolIdeal";

/////////////////////////////////////////
//-- for test w/ 8Tower calibrations   --//
/////////////////////////////////////////
ApplicationMgr.ExtSvc += {"CalCalibSvc/CalCalibSvc8Tower"};
CalCalibSvc8Tower.DefaultFlavor  = "CAL_8tower_test";
ToolSvc.XtalDigiTool8Tower.CalCalibSvc   = "CalCalibSvc8Tower";
ToolSvc.XtalDigiTool8Tower.CalTrigTool   = "CalTrigTool8Tower";
ToolSvc.XtalDigiTool8Tower.PrecalcCalibTool = "PrecalcCalibTool8Tower";
ToolSvc.CalTrigTool8Tower.PrecalcCalibTool = "PrecalcCalibTool8Tower";
ToolSvc.XtalRecTool8Tower.CalCalibSvc    = "CalCalibSvc8Tower";
ToolSvc.CalTrigTool8Tower.CalCalibSvc    = "CalCalibSvc8Tower";
ToolSvc.PrecalcCalibTool8Tower.CalCalibSvc = "CalCalibSvc8Tower";
ToolSvc.XtalDigiTool8Tower.NoRandomNoise = true; // default to no random noise

ToolSvc.XtalDigiTool8TowerNoise.CalCalibSvc   = "CalCalibSvc8Tower";
ToolSvc.XtalDigiTool8TowerNoise.CalTrigTool   = "CalTrigTool8Tower";
ToolSvc.XtalDigiTool8TowerNoise.PrecalcCalibTool = "PrecalcCalibTool8Tower";


// Set output level threshold (2=DEBUG, 3=INFO, 4=WARNING, 5=ERROR, 6=FATAL )
MessageSvc.OutputLevel = 4;
ApplicationMgr.EvtMax  = 1;

ApplicationMgr.ExtSvc += {"CalFailureModeSvc"};
CalFailureModeSvc.towerAfeeList= {"10_2"}; 
CalFailureModeSvc.towerList= {"11"}; 
CalFailureModeSvc.towerControllerList= {"4_2"}; 


//==============================================================
//
// End of job options file
//
//##############################################################
//test_CalXtalResponse.skipNoiseTests = true;
