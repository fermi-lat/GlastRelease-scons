//##############################################################
//
//  Job options file for CalXtalResponse test 


// primary DLLs

ApplicationMgr.DLLs+= {"CalibSvc","CalXtalResponse"};

// ----------------------------
// setup basic event loop stuff
//
ApplicationMgr.ExtSvc = { 
//    "GlastEventSelector/EventSelector" , 
    "EventCnvSvc"
    };
EventPersistencySvc.CnvServices = {"EventCnvSvc"};
EventSelector.Input = "NONE";


// ----------------------------
//  topalg
//
ApplicationMgr.TopAlg = {
	"test_CalXtalResponse"
    };


// ----------------------------
//  Geometry definition
//
ApplicationMgr.DLLs += {"GlastSvc"};
ApplicationMgr.ExtSvc += { "GlastDetSvc"};
GlastDetSvc.topVolume="LAT"; 
GlastDetSvc.xmlfile="$(XMLGEODBSROOT)/xml/flight/flightSegVols.xml";
GlastDetSvc.visitorMode="recon";

// Start up a CalibDataSvc 
ApplicationMgr.ExtSvc += {"CalibDataSvc"};

ApplicationMgr.ExtSvc += {"CalibMySQLCnvSvc", "CalibXmlCnvSvc" };

DetectorPersistencySvc.CnvServices += {"CalibMySQLCnvSvc"};
DetectorPersistencySvc.CnvServices += {"CalibXmlCnvSvc"};

// CalibDataSvc properties 
// Storage type of 14 corresponds to MYSQL
CalibDataSvc.CalibInstrumentName = "LAT";
CalibDataSvc.CalibStorageType    = 14;
CalibDataSvc.CalibRootName       = "Calib";
CalibDataSvc.CalibFlavorList     = {"ideal","CalXtalResponse_test"};


///////////////////////////////////////////////
//-- test w/ real calibrations (default)   --//
///////////////////////////////////////////////
ApplicationMgr.ExtSvc += {"CalCalibSvc/CalCalibSvc"};
CalCalibSvc.DefaultFlavor  = "CalXtalResponse_test";

/////////////////////////////////////
//-- tests w/ ideal calibrations --//
/////////////////////////////////////
ApplicationMgr.ExtSvc += {"CalCalibSvc/CalCalibSvcIdeal"};

CalCalibSvcIdeal.DefaultFlavor = "ideal"; // default for all calib types

ToolSvc.PrecalcCalibToolIdeal.CalCalibSvc = "CalCalibSvcIdeal";

ToolSvc.CalSignalToolIdeal.XtalSignalToolName = "XtalSignalToolIdeal";
ToolSvc.CalSignalToolIdeal.enableNoise = false; // default to no random noise
ToolSvc.CalSignalToolIdeal.PrecalcCalibTool = "PrecalcCalibToolIdeal";

ToolSvc.CalSignalToolIdeal.XtalSignalToolIdeal.CalCalibSvc  = "CalCalibSvcIdeal";


test_CalXtalResponse.XtalDigiToolIdeal.CalCalibSvc  = "CalCalibSvcIdeal";
test_CalXtalResponse.XtalDigiToolIdeal.PrecalcCalibTool = "PrecalcCalibToolIdeal";
test_CalXtalResponse.XtalRecToolIdeal.CalCalibSvc   = "CalCalibSvcIdeal";

test_CalXtalResponse.CalTrigToolIdeal.PrecalcCalibTool = "PrecalcCalibToolIdeal";
test_CalXtalResponse.CalTrigToolIdeal.CalCalibSvc = "CalCalibSvcIdeal";


//- xtaldigi w/ noise
ToolSvc.CalSignalToolIdealNoise.XtalSignalToolName = "XtalSignalToolIdealNoise";
ToolSvc.CalSignalToolIdealNoise.PrecalcCalibTool = "PrecalcCalibToolIdeal";

ToolSvc.CalSignalToolIdealNoise.XtalSignalToolIdealNoise.CalCalibSvc  = "CalCalibSvcIdeal";

ToolSvc.CalSignalTool.enableNoise = false; // default to no random noise

// Set output level threshold (2=DEBUG, 3=INFO, 4=WARNING, 5=ERROR, 6=FATAL )
MessageSvc.OutputLevel = 4;
ApplicationMgr.EvtMax  = 1;

ApplicationMgr.ExtSvc += {"CalFailureModeSvc"};
CalFailureModeSvc.towerAfeeList= {"10_2"}; 
CalFailureModeSvc.towerList= {"11"}; 
CalFailureModeSvc.towerControllerList= {"4_2"}; 


//==============================================================
//
// End of job options file
//
//##############################################################
//test_CalXtalResponse.skipNoiseTests = true;
test_CalXtalResponse.tupleFilename = "test_CalXtalResponse.root";

