<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=iso-8859-1">
<title>CalFailureModeSvc class Reference</title>
<link href="doxygen.css" rel="stylesheet" type="text/css">
</head><body>
<!-- Generated by Doxygen 1.2.16 -->
<center>
<a class="qindex" href="main.html">Main Page</a> &nbsp; <a class="qindex" href="hierarchy.html">Class Hierarchy</a> &nbsp; <a class="qindex" href="annotated.html">Compound List</a> &nbsp; <a class="qindex" href="files.html">File List</a> &nbsp; <a class="qindex" href="functions.html">Compound Members</a> &nbsp; <a class="qindex" href="globals.html">File Members</a> &nbsp; </center>
<hr><h1>CalFailureModeSvc  Class Reference</h1>Service to store and compare to a list of desired failure modes in the CAL. 
<a href="#_details">More...</a>
<p>
<code>#include &lt;<a class="el" href="_cal_failure_mode_svc_8h-source.html">CalFailureModeSvc.h</a>&gt;</code>
<p>
<p>Inheritance diagram for CalFailureModeSvc:
<p><center><img src="class_cal_failure_mode_svc.png" usemap="#CalFailureModeSvc_map" border="0"></center>
<map name="CalFailureModeSvc_map">
<area href="class_i_cal_failure_mode_svc.html" alt="ICalFailureModeSvc" shape="rect" coords="0,0,128,24">
</map>
<a href="class_cal_failure_mode_svc-members.html">List of all members.</a><table border=0 cellpadding=0 cellspacing=0>
<tr><td colspan=2><br><h2>Public Types</h2></td></tr>
<tr><td nowrap align=right valign=top>enum &nbsp;</td><td valign=bottom>{ <a class="el" href="class_cal_failure_mode_svc.html#s2s0">TOWER</a>, 
<a class="el" href="class_cal_failure_mode_svc.html#s2s1">TOWERLAYER</a>
 }</td></tr>
<tr><td colspan=2><br><h2>Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#a0">CalFailureModeSvc</a> (const std::string &amp;name, ISvcLocator *pSvcLocator)</td></tr>
<tr><td nowrap align=right valign=top>StatusCode&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#a1">initialize</a> ()</td></tr>
<tr><td nowrap align=right valign=top>StatusCode&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#a2">execute</a> ()</td></tr>
<tr><td nowrap align=right valign=top>StatusCode&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#a3">finalize</a> ()</td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#a4">getFailureConditions</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>get the list of enabled failure mode conditions</em> <a href="#a4"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#a5">matchChannel</a> (idents::CalXtalId id)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>look for crystal in list of dead towers</em> <a href="#a5"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>StatusCode&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#a6">queryInterface</a> (const IID &amp;riid, void **ppvUnknown)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>queryInterface - for implementing a Service this is necessary</em> <a href="#a6"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>const IID &amp;&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#a7">type</a> () const</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>return the service type</em> <a href="#a7"></a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Static Public Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>const InterfaceID &amp;&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#d0">interfaceID</a> ()</td></tr>
<tr><td colspan=2><br><h2>Protected Methods</h2></td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#b0">matchTower</a> (idents::CalXtalId id)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>look for crystal in list of dead towers</em> <a href="#b0"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>bool&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#b1">matchTowerLayer</a> (idents::CalXtalId id)</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>look for crystal in list of dead layers</em> <a href="#b1"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#b2">processTowerList</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>process the input list of towers</em> <a href="#b2"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>void&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#b3">processTowerLayerList</a> ()</td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>process the input list of tower/layer pairs</em> <a href="#b3"></a><em></em></font><br><br></td></tr>
<tr><td colspan=2><br><h2>Private Attributes</h2></td></tr>
<tr><td nowrap align=right valign=top>StringArrayProperty&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#o0">m_towerListProperty</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>List of towers from jobOptions.</em> <a href="#o0"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>StringArrayProperty&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#o1">m_towerLayerListProperty</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>List of towers,layers from jobOptions.</em> <a href="#o1"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>int&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#o2">m_failureModes</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>bitmap of failure modes</em> <a href="#o2"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>std::vector&lt; int &gt;&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#o3">m_towerList</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>vector of towers to fail</em> <a href="#o3"></a><em></em></font><br><br></td></tr>
<tr><td nowrap align=right valign=top>std::map&lt; int, std::vector&lt;<br>
 int &gt; &gt;&nbsp;</td><td valign=bottom><a class="el" href="class_cal_failure_mode_svc.html#o4">m_towerLayerList</a></td></tr>
<tr><td>&nbsp;</td><td><font size=-1><em>map of towers/layers to fail</em> <a href="#o4"></a><em></em></font><br><br></td></tr>
</table>
<hr><a name="_details"></a><h2>Detailed Description</h2>
Service to store and compare to a list of desired failure modes in the CAL.
<p>
Author: R.Dubois 
<p>

<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00017">17</a> of file <a class="el" href="_cal_failure_mode_svc_8h-source.html">CalFailureModeSvc.h</a>.<hr><h2>Member Enumeration Documentation</h2>
<a name="s2" doxytag="CalFailureModeSvc::@0"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> anonymous enum
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
<dl compact><dt><b>
Enumeration values:</b><dd>
<table border=0 cellspacing=2 cellpadding=0>
<tr><td valign=top><em><a name="s2s0" doxytag="TOWER"></a><em>TOWER</em></em>&nbsp;</td><td>
</td></tr>
<tr><td valign=top><em><a name="s2s1" doxytag="TOWERLAYER"></a><em>TOWERLAYER</em></em>&nbsp;</td><td>
</td></tr>
</table>
</dl>

<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00030">30</a> of file <a class="el" href="_cal_failure_mode_svc_8h-source.html">CalFailureModeSvc.h</a>.
<p>
<div class="fragment"><pre>00030 {<a class="code" href="class_cal_failure_mode_svc.html#s2s0">TOWER</a>, <a class="code" href="class_cal_failure_mode_svc.html#s2s1">TOWERLAYER</a>};
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Constructor &amp; Destructor Documentation</h2>
<a name="a0" doxytag="CalFailureModeSvc::CalFailureModeSvc"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> CalFailureModeSvc::CalFailureModeSvc </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const std::string &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>name</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>ISvcLocator *&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>pSvcLocator</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00021">21</a> of file <a class="el" href="_cal_failure_mode_svc_8cxx-source.html">CalFailureModeSvc.cxx</a>.
<p>
References <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00065">m_towerLayerListProperty</a>, and <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00062">m_towerListProperty</a>.
<p>
<div class="fragment"><pre>00021                                                                            : Service(name,svc)
00022 {
00023     <font class="comment">// Purpose and Method: Constructor - Declares and sets default properties</font>
00024     <font class="comment">//                     </font>
00025     <font class="comment">// Inputs: service name and locator </font>
00026     <font class="comment">//         </font>
00027     <font class="comment">// Outputs: None</font>
00028     <font class="comment">// Dependencies: None</font>
00029     <font class="comment">// Restrictions and Caveats:  None</font>
00030     
00031     <font class="comment">// declare the properties</font>
00032 
00033     declareProperty(<font class="stringliteral">"towerList"</font>, <a class="code" href="class_cal_failure_mode_svc.html#o0">m_towerListProperty</a>);
00034     declareProperty(<font class="stringliteral">"towerLayerList"</font>, <a class="code" href="class_cal_failure_mode_svc.html#o1">m_towerLayerListProperty</a>);
00035 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Function Documentation</h2>
<a name="a2" doxytag="CalFailureModeSvc::execute"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> StatusCode CalFailureModeSvc::execute </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
    </td>
  </tr>
</table>
<a name="a3" doxytag="CalFailureModeSvc::finalize"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> StatusCode CalFailureModeSvc::finalize </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00082">82</a> of file <a class="el" href="_cal_failure_mode_svc_8cxx-source.html">CalFailureModeSvc.cxx</a>.
<p>
<div class="fragment"><pre>00082 {<font class="keywordflow">return</font> StatusCode::SUCCESS;}
</pre></div>    </td>
  </tr>
</table>
<a name="a4" doxytag="CalFailureModeSvc::getFailureConditions"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int CalFailureModeSvc::getFailureConditions </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
get the list of enabled failure mode conditions
<p>

<p>
Implements <a class="el" href="class_i_cal_failure_mode_svc.html#a0">ICalFailureModeSvc</a>.
<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00028">28</a> of file <a class="el" href="_cal_failure_mode_svc_8h-source.html">CalFailureModeSvc.h</a>.
<p>
References <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00068">m_failureModes</a>.
<p>
<div class="fragment"><pre>00028 {<font class="keywordflow">return</font> <a class="code" href="class_cal_failure_mode_svc.html#o2">m_failureModes</a>;};
</pre></div>    </td>
  </tr>
</table>
<a name="a1" doxytag="CalFailureModeSvc::initialize"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> StatusCode CalFailureModeSvc::initialize </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00052">52</a> of file <a class="el" href="_cal_failure_mode_svc_8cxx-source.html">CalFailureModeSvc.cxx</a>.
<p>
References <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00068">m_failureModes</a>, <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00084">processTowerLayerList</a>(), and <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00110">processTowerList</a>().
<p>
<div class="fragment"><pre>00053 {
00054     <font class="comment">// Purpose and Method: Initialize the lists of dead units</font>
00055     <font class="comment">//                     </font>
00056     <font class="comment">// Inputs: None        </font>
00057     <font class="comment">// Outputs: None</font>
00058     <font class="comment">// Dependencies: None</font>
00059     <font class="comment">// Restrictions and Caveats:  None</font>
00060     
00061     StatusCode  status = StatusCode::SUCCESS;
00062     
00063     <font class="comment">// Open the message log</font>
00064     MsgStream log( msgSvc(), name() );
00065     
00066     <font class="comment">// Call super-class</font>
00067     Service::initialize ();
00068     
00069     <font class="comment">// Bind all of the properties for this service</font>
00070     <font class="keywordflow">if</font> ( (status = setProperties()).isFailure() ) {
00071         log &lt;&lt; MSG::ERROR &lt;&lt; <font class="stringliteral">"Failed to set properties"</font> &lt;&lt; endreq;
00072     }
00073     
00074     
00075     <a class="code" href="class_cal_failure_mode_svc.html#o2">m_failureModes</a> = 0;
00076     <a class="code" href="class_cal_failure_mode_svc.html#b2">processTowerList</a>();
00077     <a class="code" href="class_cal_failure_mode_svc.html#b3">processTowerLayerList</a>();
00078     
00079     <font class="keywordflow">return</font> StatusCode::SUCCESS;
00080 }
</pre></div>    </td>
  </tr>
</table>
<a name="d0" doxytag="CalFailureModeSvc::interfaceID"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const InterfaceID&amp; CalFailureModeSvc::interfaceID </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [inline, static]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>

<p>
Reimplemented from <a class="el" href="class_i_cal_failure_mode_svc.html#d0">ICalFailureModeSvc</a>.
<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00038">38</a> of file <a class="el" href="_cal_failure_mode_svc_8h-source.html">CalFailureModeSvc.h</a>.
<p>
References <a class="el" href="_i_cal_failure_mode_svc_8h-source.html#l00028">ICalFailureModeSvc::interfaceID</a>().
<p>
<div class="fragment"><pre>00038                                             {
00039         <font class="keywordflow">return</font> <a class="code" href="class_i_cal_failure_mode_svc.html#d0">ICalFailureModeSvc::interfaceID</a>(); 
00040     }
</pre></div>    </td>
  </tr>
</table>
<a name="a5" doxytag="CalFailureModeSvc::matchChannel"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CalFailureModeSvc::matchChannel </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">idents::CalXtalId&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>id</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
look for crystal in list of dead towers
<p>

<p>
Implements <a class="el" href="class_i_cal_failure_mode_svc.html#a1">ICalFailureModeSvc</a>.
<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00164">164</a> of file <a class="el" href="_cal_failure_mode_svc_8cxx-source.html">CalFailureModeSvc.cxx</a>.
<p>
References <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00133">matchTower</a>(), and <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00147">matchTowerLayer</a>().
<p>
<div class="fragment"><pre>00164                                                        {
00165     <font class="comment">// Purpose and Method: look for the given id in the (tower,layer) list</font>
00166     <font class="comment">//                     </font>
00167      
00168     <font class="keywordflow">if</font> (<a class="code" href="class_cal_failure_mode_svc.html#b0">matchTower</a>(id)) <font class="keywordflow">return</font> <font class="keyword">true</font>;
00169     <font class="keywordflow">if</font> (<a class="code" href="class_cal_failure_mode_svc.html#b1">matchTowerLayer</a>(id)) <font class="keywordflow">return</font> <font class="keyword">true</font>;
00170     
00171     <font class="keywordflow">return</font> <font class="keyword">false</font>;
00172 }
</pre></div>    </td>
  </tr>
</table>
<a name="b0" doxytag="CalFailureModeSvc::matchTower"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CalFailureModeSvc::matchTower </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">idents::CalXtalId&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>id</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
look for crystal in list of dead towers
<p>

<p>
Implements <a class="el" href="class_i_cal_failure_mode_svc.html#b0">ICalFailureModeSvc</a>.
<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00133">133</a> of file <a class="el" href="_cal_failure_mode_svc_8cxx-source.html">CalFailureModeSvc.cxx</a>.
<p>
References <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00071">m_towerList</a>.
<p>
Referenced by <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00164">matchChannel</a>().
<p>
<div class="fragment"><pre>00133                                                      {
00134     <font class="comment">// Purpose and Method: check whether given id is in any of the identified lists</font>
00135     <font class="comment">//                     </font>
00136     
00137     <font class="keywordflow">if</font> (<a class="code" href="class_cal_failure_mode_svc.html#o3">m_towerList</a>.size() == 0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00138 
00139     <font class="keywordtype">int</font> tower = id.getTower();
00140     
00141     <font class="comment">// Search to see if this event id is among the list of ids we want to pause on</font>
00142     <font class="keywordtype">int</font> *loc = std::find(<a class="code" href="class_cal_failure_mode_svc.html#o3">m_towerList</a>.begin(), <a class="code" href="class_cal_failure_mode_svc.html#o3">m_towerList</a>.end(), tower);                
00143 
00144     <font class="keywordflow">return</font> (loc != <a class="code" href="class_cal_failure_mode_svc.html#o3">m_towerList</a>.end());
00145 }
</pre></div>    </td>
  </tr>
</table>
<a name="b1" doxytag="CalFailureModeSvc::matchTowerLayer"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> bool CalFailureModeSvc::matchTowerLayer </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">idents::CalXtalId&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp; <em>id</em>          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
look for crystal in list of dead layers
<p>

<p>
Implements <a class="el" href="class_i_cal_failure_mode_svc.html#b1">ICalFailureModeSvc</a>.
<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00147">147</a> of file <a class="el" href="_cal_failure_mode_svc_8cxx-source.html">CalFailureModeSvc.cxx</a>.
<p>
References <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00074">m_towerLayerList</a>.
<p>
Referenced by <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00164">matchChannel</a>().
<p>
<div class="fragment"><pre>00147                                                           {
00148     <font class="comment">// Purpose and Method: look for the given id in the tower list</font>
00149     <font class="comment">//                     </font>
00150     
00151     <font class="keywordflow">if</font> (<a class="code" href="class_cal_failure_mode_svc.html#o4">m_towerLayerList</a>.size() == 0) <font class="keywordflow">return</font> <font class="keyword">false</font>;
00152 
00153     <font class="keywordtype">int</font> tower = id.getTower();
00154     <font class="keywordtype">int</font> layer = id.getLayer();
00155     
00156     std::vector&lt;int&gt; &amp;layerList = <a class="code" href="class_cal_failure_mode_svc.html#o4">m_towerLayerList</a>[tower];
00157     
00158     <font class="comment">// Search to see if this (tower,layer) is among the list</font>
00159     <font class="keywordtype">int</font> *loc = std::find(layerList.begin(), layerList.end(), layer);                
00160     
00161     <font class="keywordflow">return</font> (loc != layerList.end());
00162 }
</pre></div>    </td>
  </tr>
</table>
<a name="b3" doxytag="CalFailureModeSvc::processTowerLayerList"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CalFailureModeSvc::processTowerLayerList </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
process the input list of tower/layer pairs
<p>

<p>
Implements <a class="el" href="class_i_cal_failure_mode_svc.html#b3">ICalFailureModeSvc</a>.
<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00084">84</a> of file <a class="el" href="_cal_failure_mode_svc_8cxx-source.html">CalFailureModeSvc.cxx</a>.
<p>
References <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00068">m_failureModes</a>, <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00074">m_towerLayerList</a>, <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00065">m_towerLayerListProperty</a>, and <a class="el" href="class_cal_failure_mode_svc.html#s2s0">TOWER</a>.
<p>
Referenced by <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00052">initialize</a>().
<p>
<div class="fragment"><pre>00084                                               {
00085     <font class="comment">// Purpose and Method: process the jobOptions input lists of (tower,layer) pairs</font>
00086     <font class="comment">//                     </font>
00087     
00088     MsgStream log(msgSvc(), name());
00089     
00090     <font class="keyword">const</font> std::vector&lt;std::string&gt;&amp; theTowers = <a class="code" href="class_cal_failure_mode_svc.html#o1">m_towerLayerListProperty</a>.value( );
00091     <font class="keywordflow">if</font> (theTowers.size() == 0) <font class="keywordflow">return</font>;
00092 
00093     <a class="code" href="class_cal_failure_mode_svc.html#o2">m_failureModes</a> = <a class="code" href="class_cal_failure_mode_svc.html#o2">m_failureModes</a> || 1 &lt;&lt; <a class="code" href="class_cal_failure_mode_svc.html#s2s0">TOWER</a>;
00094 
00095     log &lt;&lt; MSG::DEBUG &lt;&lt; <font class="stringliteral">"Towers and Layers to kill "</font> &lt;&lt; endreq;
00096 
00097     std::vector&lt;std::string&gt;::const_iterator it;
00098     std::vector&lt;std::string&gt;::const_iterator itend = theTowers.end( );
00099     <font class="keywordflow">for</font> (it = theTowers.begin(); it != itend; it++) {
00100         <font class="keywordtype">int</font> len = (*it).size();
00101         <font class="keywordtype">int</font> delimPos = (*it).find_first_of(<font class="charliteral">'_'</font>);
00102         <font class="keywordtype">int</font> tower = atoi((*it).substr(0, delimPos).c_str());
00103         <font class="keywordtype">int</font> layer = atoi((*it).substr(delimPos+1, len-delimPos-1).c_str());
00104         log &lt;&lt; MSG::DEBUG &lt;&lt; <font class="stringliteral">"Tower "</font> &lt;&lt; tower &lt;&lt; <font class="stringliteral">" Layer "</font> &lt;&lt; layer &lt;&lt; endreq;
00105         std::vector&lt;int&gt;&amp; curList = <a class="code" href="class_cal_failure_mode_svc.html#o4">m_towerLayerList</a>[tower];
00106         curList.push_back(layer);                
00107     }
00108 }
</pre></div>    </td>
  </tr>
</table>
<a name="b2" doxytag="CalFailureModeSvc::processTowerList"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> void CalFailureModeSvc::processTowerList </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap><code> [protected, virtual]</code></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
process the input list of towers
<p>

<p>
Implements <a class="el" href="class_i_cal_failure_mode_svc.html#b2">ICalFailureModeSvc</a>.
<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00110">110</a> of file <a class="el" href="_cal_failure_mode_svc_8cxx-source.html">CalFailureModeSvc.cxx</a>.
<p>
References <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00068">m_failureModes</a>, <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00071">m_towerList</a>, <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00062">m_towerListProperty</a>, and <a class="el" href="class_cal_failure_mode_svc.html#s2s1">TOWERLAYER</a>.
<p>
Referenced by <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00052">initialize</a>().
<p>
<div class="fragment"><pre>00110                                          {
00111      <font class="comment">// Purpose and Method: process the jobOptions input lists of towers</font>
00112     <font class="comment">//                     </font>
00113    
00114     MsgStream log(msgSvc(), name());
00115     
00116     <font class="keyword">const</font> std::vector&lt;std::string&gt;&amp; theTowers = <a class="code" href="class_cal_failure_mode_svc.html#o0">m_towerListProperty</a>.value( );
00117 
00118     <font class="keywordflow">if</font> (theTowers.size() == 0) <font class="keywordflow">return</font>;
00119 
00120     log &lt;&lt; MSG::DEBUG &lt;&lt; <font class="stringliteral">"Towers to kill "</font> &lt;&lt; endreq;
00121 
00122     <a class="code" href="class_cal_failure_mode_svc.html#o2">m_failureModes</a> = <a class="code" href="class_cal_failure_mode_svc.html#o2">m_failureModes</a> || 1 &lt;&lt; <a class="code" href="class_cal_failure_mode_svc.html#s2s1">TOWERLAYER</a>;
00123 
00124     std::vector&lt;std::string&gt;::const_iterator it;
00125     std::vector&lt;std::string&gt;::const_iterator itend = theTowers.end( );
00126     <font class="keywordflow">for</font> (it = theTowers.begin(); it != itend; it++) {
00127         <font class="keywordtype">int</font> tower = atoi((*it).c_str());
00128         log &lt;&lt; MSG::DEBUG &lt;&lt; <font class="stringliteral">"Tower "</font> &lt;&lt; tower &lt;&lt; endreq;
00129         <a class="code" href="class_cal_failure_mode_svc.html#o3">m_towerList</a>.push_back(tower);
00130     }
00131 }
</pre></div>    </td>
  </tr>
</table>
<a name="a6" doxytag="CalFailureModeSvc::queryInterface"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> StatusCode CalFailureModeSvc::queryInterface </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="md" nowrap valign="top">const IID &amp;&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>riid</em>, </td>
        </tr>
        <tr>
          <td></td>
          <td></td>
          <td class="md" nowrap>void **&nbsp;</td>
          <td class="mdname" nowrap>&nbsp; <em>ppvUnknown</em></td>
        </tr>
        <tr>
          <td></td>
          <td class="md">)&nbsp;</td>
          <td class="md" colspan="2"></td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
queryInterface - for implementing a Service this is necessary
<p>

<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00037">37</a> of file <a class="el" href="_cal_failure_mode_svc_8cxx-source.html">CalFailureModeSvc.cxx</a>.
<p>
<div class="fragment"><pre>00038 {
00039     <font class="keywordflow">if</font> (IID_ICalFailureModeSvc == riid) {
00040         *ppvIF = dynamic_cast&lt;ICalFailureModeSvc*&gt; (this);
00041         <font class="keywordflow">return</font> StatusCode::SUCCESS;
00042     }
00043     <font class="keywordflow">else</font> {
00044         <font class="keywordflow">return</font> Service::queryInterface (riid, ppvIF);
00045     }
00046 }
</pre></div>    </td>
  </tr>
</table>
<a name="a7" doxytag="CalFailureModeSvc::type"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> const IID &amp; CalFailureModeSvc::type </td>
          <td class="md" valign="top">(&nbsp;</td>
          <td class="mdname1" valign="top" nowrap>&nbsp;          </td>
          <td class="md" valign="top">)&nbsp;</td>
          <td class="md" nowrap> const</td>
        </tr>

      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
return the service type
<p>

<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00048">48</a> of file <a class="el" href="_cal_failure_mode_svc_8cxx-source.html">CalFailureModeSvc.cxx</a>.
<p>
<div class="fragment"><pre>00048                                            {
00049     <font class="keywordflow">return</font> IID_ICalFailureModeSvc;
00050 }
</pre></div>    </td>
  </tr>
</table>
<hr><h2>Member Data Documentation</h2>
<a name="o2" doxytag="CalFailureModeSvc::m_failureModes"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> int CalFailureModeSvc::m_failureModes<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
bitmap of failure modes
<p>

<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00068">68</a> of file <a class="el" href="_cal_failure_mode_svc_8h-source.html">CalFailureModeSvc.h</a>.
<p>
Referenced by <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00028">getFailureConditions</a>(), <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00052">initialize</a>(), <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00084">processTowerLayerList</a>(), and <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00110">processTowerList</a>().    </td>
  </tr>
</table>
<a name="o4" doxytag="CalFailureModeSvc::m_towerLayerList"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> std::map&lt;int,std::vector&lt;int&gt; &gt; CalFailureModeSvc::m_towerLayerList<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
map of towers/layers to fail
<p>

<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00074">74</a> of file <a class="el" href="_cal_failure_mode_svc_8h-source.html">CalFailureModeSvc.h</a>.
<p>
Referenced by <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00147">matchTowerLayer</a>(), and <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00084">processTowerLayerList</a>().    </td>
  </tr>
</table>
<a name="o1" doxytag="CalFailureModeSvc::m_towerLayerListProperty"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> StringArrayProperty CalFailureModeSvc::m_towerLayerListProperty<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
List of towers,layers from jobOptions.
<p>

<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00065">65</a> of file <a class="el" href="_cal_failure_mode_svc_8h-source.html">CalFailureModeSvc.h</a>.
<p>
Referenced by <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00021">CalFailureModeSvc</a>(), and <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00084">processTowerLayerList</a>().    </td>
  </tr>
</table>
<a name="o3" doxytag="CalFailureModeSvc::m_towerList"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> std::vector&lt;int&gt; CalFailureModeSvc::m_towerList<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
vector of towers to fail
<p>

<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00071">71</a> of file <a class="el" href="_cal_failure_mode_svc_8h-source.html">CalFailureModeSvc.h</a>.
<p>
Referenced by <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00133">matchTower</a>(), and <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00110">processTowerList</a>().    </td>
  </tr>
</table>
<a name="o0" doxytag="CalFailureModeSvc::m_towerListProperty"></a><p>
<table width="100%" cellpadding="2" cellspacing="0" border="0">
  <tr>
    <td class="md">
      <table cellpadding="0" cellspacing="0" border="0">
        <tr>
          <td class="md" nowrap valign="top"> StringArrayProperty CalFailureModeSvc::m_towerListProperty<code> [private]</code>
      </table>
    </td>
  </tr>
</table>
<table cellspacing=5 cellpadding=0 border=0>
  <tr>
    <td>
      &nbsp;
    </td>
    <td>

<p>
List of towers from jobOptions.
<p>

<p>
Definition at line <a class="el" href="_cal_failure_mode_svc_8h-source.html#l00062">62</a> of file <a class="el" href="_cal_failure_mode_svc_8h-source.html">CalFailureModeSvc.h</a>.
<p>
Referenced by <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00021">CalFailureModeSvc</a>(), and <a class="el" href="_cal_failure_mode_svc_8cxx-source.html#l00110">processTowerList</a>().    </td>
  </tr>
</table>
<hr>The documentation for this class was generated from the following files:<ul>
<li><a class="el" href="_cal_failure_mode_svc_8h-source.html">CalFailureModeSvc.h</a><li><a class="el" href="_cal_failure_mode_svc_8cxx-source.html">CalFailureModeSvc.cxx</a></ul>
<hr><address align="right"><small>Generated on Tue Oct 29 08:24:27 2002 for CalUtil by
<a href="http://www.doxygen.org/index.html">
<img src="doxygen.png" alt="doxygen" align="middle" border=0 
width=110 height=53></a>1.2.16 </small></address>
</body>
</html>
