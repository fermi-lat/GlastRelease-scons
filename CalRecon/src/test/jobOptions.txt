//##############################################################
//
//  Job options file for CalRecon test 

// primary DLLs

ApplicationMgr.DLLs+= {"RootIo","CalRecon","CalUtil","CalibSvc"};

// ----------------------------
// setup basic event loop stuff
//
ApplicationMgr.ExtSvc = { 
    "GlastEventSelector/EventSelector" , 
    "EventCnvSvc"
    };
EventPersistencySvc.CnvServices = {"EventCnvSvc"};
EventSelector.Input = "NONE";

// Start up a CalibDataSvc 
ApplicationMgr.ExtSvc += {"CalibDataSvc"};

ApplicationMgr.ExtSvc += {"CalibMySQLCnvSvc", "CalibXmlCnvSvc" };

DetectorPersistencySvc.CnvServices += {"CalibMySQLCnvSvc"};
DetectorPersistencySvc.CnvServices += {"CalibXmlCnvSvc"};

// CalibDataSvc properties below are explicitly set to the
// default values as established in CalibDataSvc.cxx.  
// They're listed below in order of likelihood of need to override, 
// from most to least likely.
// Storage type of 14 corresponds to MYSQL
CalibDataSvc.CalibInstrumentName = "LAT";
CalibDataSvc.CalibStorageType = 14;
CalibDataSvc.CalibRootName = "Calib";
CalibDataSvc.CalibFlavorList = {"ideal"};

// ----------------------------
//  topalg
//
ApplicationMgr.TopAlg = {
	"digiRootReaderAlg",      
    "CalXtalRecAlg", 
    "CalClustersAlg",
	"test_CalRecon"
    };


// ----------------------------
//  Geometry definition
//
ApplicationMgr.DLLs += {"GlastSvc", "G4Propagator", "G4Generator","TkrUtil"};
ApplicationMgr.ExtSvc += { "GlastDetSvc" };
GlastDetSvc.topVolume="LAT"; 

GlastDetSvc.xmlfile="$(XMLGEODBSROOT)/xml/flight/flightSegVols.xml";
GlastDetSvc.visitorMode="recon";

// specific for this test
ApplicationMgr.DLLs += {"AnalysisNtuple"};


// Set output level threshold (2=DEBUG, 3=INFO, 4=WARNING, 5=ERROR, 6=FATAL )
MessageSvc.OutputLevel = 2;
ApplicationMgr.EvtMax = 10;
digiRootReaderAlg.digiRootFile="$(CALRECONROOT)/src/test/muon_digi.root";

//    use the following lines to perform fuzzy clustering:
//ApplicationMgr.DLLs += {"FC"};
//CalClustersAlg.clusterToolName="FuzzyClusterTool";
//
//    the command param is mandatory for the FuzzyCluster Gaudi tool
//    which is retrieved as a private tool by FuzzyClusterTool, that
//    in its turn is a shared tool.
//ToolSvc.FuzzyClusterTool.FuzzyCluster.command="cini -r2:4 | fcm | pick";
//
//    clusterSetNo is a param of FuzzyClusterTool that specifies
//    the index of the partition that should be considered; its default
//    value is zero.
//ToolSvc.FuzzyClusterTool.clusterSetNo=0;


//==============================================================
//
// End of job options file
//
//##############################################################

